var searchData = {
    'Mobs': [
        { title: 'Mob', page: 'mobs.html', category: 'Category' },
        { title: 'TEST', page: 'mobs.html', category: 'Category' },
        { title: 'TES2T', page: 'mobs.html', category: 'Category' },
        { title: 'Bore', page: 'mobs/bore.html', category: 'Mobs' },
        { title: 'Brine', page: 'mobs/brine.html', category: 'Mobs' },
        { title: 'Earth Charge', page: 'mobs/earth_charge.html', category: 'Mobs' },
        { title: 'Water Charge', page: 'mobs/water_charge.html', category: 'Mobs' }
    ],
    'Blocks': [
        { title: 'Block', page: 'blocks.html', category: 'Category' },
        { title: 'Dripstone Stairs', page: 'blocks/dripstone_stairs.html', category: 'Blocks' },
        { title: 'Dripstone Slab', page: 'blocks/dripstone_slab.html', category: 'Blocks' },
        { title: 'Dripstone Wall', page: 'blocks/dripstone_wall.html', category: 'Blocks' },
        { title: 'Dripstone Bricks', page: 'blocks/dripstone_bricks.html', category: 'Blocks' },
        { title: 'Dripstone Brick Stairs', page: 'blocks/dripstone_brick_stairs.html', category: 'Blocks' },
        { title: 'Dripstone Brick Slab', page: 'blocks/dripstone_brick_slab.html', category: 'Blocks' },
        { title: 'Dripstone Brick Wall', page: 'blocks/dripstone_brick_wall.html', category: 'Blocks' },
        { title: 'Polished Dripstone', page: 'blocks/polished_dripstone.html', category: 'Blocks' },
        { title: 'Polished Dripstone Stairs', page: 'blocks/polished_dripstone_stairs.html', category: 'Blocks' },
        { title: 'Polished Dripstone Slab', page: 'blocks/polished_dripstone_slab.html', category: 'Blocks' },
        { title: 'Polished Dripstone Wall', page: 'blocks/polished_dripstone_wall.html', category: 'Blocks' },
        { title: 'Polished Dripstone Tiles', page: 'blocks/polished_dripstone_tiles.html', category: 'Blocks' },
        { title: 'Dripstone Pillar', page: 'blocks/dripstone_pillar.html', category: 'Blocks' },
        { title: 'Chiseled Dripstone Bricks', page: 'blocks/chiseled_dripstone_bricks.html', category: 'Blocks' },
        { title: 'Dark Dripstone Block', page: 'blocks/dark_dripstone_block.html', category: 'Blocks' },
        { title: 'Dark Dripstone Stairs', page: 'blocks/dark_dripstone_stairs.html', category: 'Blocks' },
        { title: 'Dark Dripstone Slab', page: 'blocks/dark_dripstone_slab.html', category: 'Blocks' },
        { title: 'Dark Dripstone Wall', page: 'blocks/dark_dripstone_wall.html', category: 'Blocks' },
        { title: 'Dark Dripstone Bricks', page: 'blocks/dark_dripstone_bricks.html', category: 'Blocks' },
        { title: 'Dark Dripstone Brick Stairs', page: 'blocks/dark_dripstone_brick_stairs.html', category: 'Blocks' },
        { title: 'Dark Dripstone Brick Slab', page: 'blocks/dark_dripstone_brick_slab.html', category: 'Blocks' },
        { title: 'Dark Dripstone Brick Wall', page: 'blocks/dark_dripstone_brick_wall.html', category: 'Blocks' },
        { title: 'Polished Dark Dripstone', page: 'blocks/polished_dark_dripstone.html', category: 'Blocks' },
        { title: 'Polished Dark Dripstone Stairs', page: 'blocks/polished_dark_dripstone_stairs.html', category: 'Blocks' },
        { title: 'Polished Dark Dripstone Slab', page: 'blocks/polished_dark_dripstone_slab.html', category: 'Blocks' },
        { title: 'Polished Dark Dripstone Wall', page: 'blocks/polished_dark_dripstone_wall.html', category: 'Blocks' },
        { title: 'Dark Dripstone Pillar', page: 'blocks/dark_dripstone_pillar.html', category: 'Blocks' },
        { title: 'Pointed Dark Dripstone', page: 'blocks/pointed_dark_dripstone.html', category: 'Blocks' },
        { title: 'Dark Prismarine Pillar', page: 'blocks/dark_prismarine_pillar.html', category: 'Blocks' },
        { title: 'Dark Prismarine Wall', page: 'blocks/dark_prismarine_wall.html', category: 'Blocks' },
        { title: 'Chiseled Prismarine Bricks', page: 'blocks/chiseled_prismarine_bricks.html', category: 'Blocks' },
        { title: 'Prismarine Pillar', page: 'blocks/prismarine_pillar.html', category: 'Blocks' },
        { title: 'Prismarine Tiles', page: 'blocks/prismarine_tiles.html', category: 'Blocks' },
        { title: 'Prismarine Tile Stairs', page: 'blocks/prismarine_tile_stairs.html', category: 'Blocks' },
        { title: 'Prismarine Tile Slab', page: 'blocks/prismarine_tile_slab.html', category: 'Blocks' },
        { title: 'Prismarine Tile Wall', page: 'blocks/prismarine_tile_wall.html', category: 'Blocks' },
        { title: 'Mixed Prismarine Tiles', page: 'blocks/mixed_prismarine_tiles.html', category: 'Blocks' },
        { title: 'Chiseled Dark Prismarine', page: 'blocks/chiseled_dark_prismarine.html', category: 'Blocks' },
        { title: 'Steel Block', page: 'blocks/steel_block.html', category: 'Blocks' },
        { title: 'Oxygen Block', page: 'blocks/oxygen_block.html', category: 'Blocks' },
        { title: 'Reinforced Spawner', page: 'blocks/reinforced_spawner.html', category: 'Blocks' }
    ],
    'Items': [
        { title: 'Item', page: 'items.html', category: 'Category' },
        { title: 'Bore Rod', page: 'items/bore_rod.html', category: 'Items' },
        { title: 'Brine Rod', page: 'items/brine_rod.html', category: 'Items' },
        { title: 'Reinforced Key', page: 'items/reinforced_key.html', category: 'Items' },
        { title: 'Steel Ingot', page: 'items/steel_ingot.html', category: 'Items' },
        { title: 'Steel Nugget', page: 'items/steel_nugget.html', category: 'Items' },
        { title: 'Spiked Shield', page: 'items/spiked_shield.html', category: 'Items' },
        { title: 'Bore Spawn Egg', page: 'items/bore_spawn_egg.html', category: 'Items' },
        { title: 'Brine Spawn Egg', page: 'items/brine_spawn_egg.html', category: 'Items' }
    ],
    'Weapons': [
        { title: 'Whip', page: 'items/whip.html', category: 'Weapons' },
        { title: 'Battle Axe', page: 'items/battle_axe.html', category: 'Weapons' }
    ],
    'Biomes': [
        { title: 'Biome', page: 'biomes.html', category: 'Category' },
        { title: 'Dark Dripstone Cave', page: 'biomes/dark_dripstone_cave.html', category: 'Biomes' }
    ],
    'Effects': [
        { title: 'Effect', page: 'effects.html', category: 'Category' },
        { title: 'Stun', page: 'effects.html#stun', category: 'Effects' },
        { title: 'Breath Giving', page: 'effects.html#breath-giving', category: 'Effects' }
    ],
    'Smithing': [
        { title: 'Smithing', page: 'smithing.html', category: 'Category' },
        { title: 'Steel Upgrade', page: 'smithing.html#spiked-shield', category: 'Smithing' },
        { title: 'Block Smithing Template', page: 'smithing.html#block-template', category: 'Smithing' },
        { title: 'Guard Smithing Template', page: 'smithing.html#guard-template', category: 'Smithing' }
    ],
    'Structures': [
        { title: 'Structure', page: 'structures.html', category: 'Structures' },
        { title: 'Conduit Monument', page: 'structures/conduit_monument.html', category: 'Structures' },
        { title: 'Ancient Ruins', page: 'structures/ancient_ruins.html', category: 'Structures' }
    ],
    'History': [
        { title: 'History', page: 'history.html', category: 'Category' },
        { title: 'Andesite Bricks', page: 'history.html#scrapped', category: 'History' },
        { title: 'Diorite Bricks', page: 'history.html#scrapped', category: 'History' },
        { title: 'Granite Bricks', page: 'history.html#scrapped', category: 'History' },
        { title: 'Spear', page: 'history.html#scrapped', category: 'History' },
        { title: 'Steel Helmet', page: 'history.html#scrapped', category: 'History' },
        { title: 'Weakened Trident', page: 'history.html#scrapped', category: 'History' },
        { title: 'Shockwave', page: 'history.html#scrapped', category: 'History' },
        { title: 'Bubble Vortex', page: 'history.html#scrapped', category: 'History' }
    ],
    'Advancements': [
        { title: 'Advancement', page: 'advancements.html', category: 'Category' },
        { title: 'Mob Lock', page: 'advancements/mob_lock.html', category: 'Advancements' },
        { title: 'Long Agoâ€¦', page: 'advancements/long_ago.html', category: 'Advancements' },
        { title: 'Boreing', page: 'advancements/boreing.html', category: 'Advancements' },
        { title: 'Atlantean Eye', page: 'advancements/atlantean_eye.html', category: 'Advancements' },
        { title: 'Stalactite Sanctum', page: 'advancements/stalactite_sanctum.html', category: 'Advancements' }
    ],
    'Paintings': [
        { title: 'Painting', page: 'paintings.html', category: 'Category' },
        { title: 'Ruins', page: 'paintings/ruins.html', category: 'Paintings' }
    ]
};

// Create flattened array for easier searching  
var allSearchItems = Object.values(searchData).flat();

// Enhanced search function with better matching
function performSearch(query) {
    if (!query || query.length === 0) {
        return [];
    }
    
    var lowerQuery = query.toLowerCase().trim();
    var words = lowerQuery.split(/\s+/);
    
    return allSearchItems
        .map(function(item) {
            var score = 0;
            var titleLower = item.title.toLowerCase();
            var categoryLower = item.category.toLowerCase();
            
            // Exact title match (highest priority)
            if (titleLower === lowerQuery) {
                score += 100;
            }
            // Title starts with query
            else if (titleLower.indexOf(lowerQuery) === 0) {
                score += 80;
            }
            // Title contains full query
            else if (titleLower.indexOf(lowerQuery) !== -1) {
                score += 60;
            }
            
            // Category matches
            if (categoryLower === lowerQuery) {
                score += 50;
            } else if (categoryLower.indexOf(lowerQuery) !== -1) {
                score += 30;
            }
            
            // Multi-word query support
            if (words.length > 1) {
                words.forEach(function(word) {
                    if (titleLower.indexOf(word) !== -1) score += 10;
                    if (categoryLower.indexOf(word) !== -1) score += 5;
                });
            }
            
            return score > 0 ? Object.assign({}, item, {score: score}) : null;
        })
        .filter(function(item) { return item !== null; })
        .sort(function(a, b) { return b.score - a.score; })
        .slice(0, 8);
}
